# v1.0.0-preview 测试用例（简化版）

## 测试说明

### 测试范围
本测试用例覆盖 TradingAgents-CN v1.0.0-preview 的所有核心功能，包括：
- 4 种安装模式的安装与启动测试
- 14 个功能模块的详细测试
- 3 个市场（A 股/港股/美股）的完整测试
- 多种数据源、LLM 提供商、分析深度的组合测试

### 安装模式
v1.0.0-preview 支持 4 种安装模式，每种模式都需要单独测试：
1. **🟢 绿色版**（Windows）- 一键安装，适合快速体验
2. **🐳 Docker 版** - 容器化部署，适合生产环境
3. **💻 源码版** - 从源码安装，适合开发者
4. **🪟 Windows 安装版** - Windows 原生安装包

### 测试优先级
- **P0**：核心功能，必须通过
- **P1**：重要功能，建议通过
- **P2**：增强功能，可选测试

---

## 模块 0：安装与部署测试

### 功能 0.1：绿色版安装（Windows）

**安装测试**
- [ ] 下载绿色版压缩包（.zip）
- [ ] 解压到指定目录（无中文路径）
- [ ] 运行 `start_all.bat` 启动所有服务
- [ ] MongoDB、Redis、后端、前端服务全部启动成功
- [ ] 浏览器自动打开 http://localhost:3000

**功能验证**
- [ ] 可以正常登录（默认用户名/密码）
- [ ] 可以进行股票分析
- [ ] 可以查看分析报告
- [ ] 可以导出报告

**停止与重启**
- [ ] 运行 `stop_all.bat` 停止所有服务
- [ ] 所有进程正常退出，无残留
- [ ] 重新启动后服务恢复正常

**升级测试**
- [ ] 下载新版本绿色包
- [ ] 覆盖旧版本文件（保留 data 目录）
- [ ] 启动后数据和配置保留
- [ ] 新功能可用

### 功能 0.2：Docker 版安装

**Docker Compose 部署**
- [ ] 克隆代码仓库或下载 docker-compose 文件
- [ ] 配置 `.env` 文件（API keys、端口等）
- [ ] 运行 `docker-compose up -d` 启动服务
- [ ] 所有容器正常启动（backend、frontend、mongodb、redis、nginx）
- [ ] 访问 http://localhost 或配置的端口

**功能验证**
- [ ] 可以正常登录
- [ ] 可以进行股票分析
- [ ] 可以查看分析报告
- [ ] 数据持久化正常（重启容器后数据保留）

**Docker Hub 镜像部署**
- [ ] 使用 `docker-compose.hub.yml` 从 Docker Hub 拉取镜像
- [ ] 镜像拉取成功，启动正常
- [ ] 功能与源码构建版本一致

**容器管理**
- [ ] `docker-compose stop` 停止服务
- [ ] `docker-compose restart` 重启服务
- [ ] `docker-compose logs` 查看日志
- [ ] `docker-compose down` 清理容器

**升级测试**
- [ ] 拉取新版本镜像
- [ ] 重新启动容器
- [ ] 数据卷保留，配置保留
- [ ] 新功能可用

### 功能 0.3：源码版安装

**环境准备**
- [ ] Python 3.10+ 安装成功
- [ ] Node.js 18+ 安装成功
- [ ] MongoDB 安装并启动
- [ ] Redis 安装并启动

**后端安装**
- [ ] 克隆代码仓库
- [ ] 创建 Python 虚拟环境
- [ ] 安装 Python 依赖（`pip install -r requirements.txt`）
- [ ] 配置 `.env` 文件
- [ ] 运行数据库初始化脚本
- [ ] 启动后端服务（`python -m app.main` 或 `uvicorn app.main:app`）
- [ ] 后端 API 可访问（http://localhost:8000/docs）

**前端安装**
- [ ] 进入 frontend 目录
- [ ] 安装 Node.js 依赖（`npm install` 或 `pnpm install`）
- [ ] 配置前端环境变量（`.env.local`）
- [ ] 启动前端开发服务器（`npm run dev`）
- [ ] 前端页面可访问（http://localhost:3000）

**功能验证**
- [ ] 前后端联调正常
- [ ] 可以进行股票分析
- [ ] 可以查看分析报告
- [ ] 热重载功能正常（开发模式）

**生产构建**
- [ ] 前端构建成功（`npm run build`）
- [ ] 后端以生产模式启动
- [ ] 性能符合预期

### 功能 0.4：Windows 安装版（如果有）

**安装程序测试**
- [ ] 下载 Windows 安装包（.exe 或 .msi）
- [ ] 运行安装程序
- [ ] 选择安装路径
- [ ] 安装过程无错误
- [ ] 自动创建桌面快捷方式和开始菜单项

**服务启动**
- [ ] 双击快捷方式启动应用
- [ ] 所有服务自动启动
- [ ] 系统托盘图标显示
- [ ] 浏览器自动打开应用页面

**功能验证**
- [ ] 可以正常登录
- [ ] 可以进行股票分析
- [ ] 可以查看分析报告

**卸载测试**
- [ ] 运行卸载程序
- [ ] 所有文件和服务清理干净
- [ ] 注册表项清理（如有）

---

## 模块 1：系统与环境

### 功能 1.1：系统启动与健康检查
- [ ] 后端 FastAPI 服务正常启动，无错误日志
- [ ] 后台 worker 进程正常启动
- [ ] 前端 Vue 应用可访问（http://localhost:3000）
- [ ] 首页 Dashboard 加载无严重错误
- [ ] 健康检查接口返回正常状态

### 功能 1.2：数据库连接
- [ ] MongoDB 连接正常，可查询数据
- [ ] Redis 连接正常，缓存可用
- [ ] 数据库初始化完成（表/集合存在）

---

## 模块 2：用户与权限

### 功能 2.1：登录与登出
- [ ] 使用正确凭证登录成功
- [ ] 登录后可访问受限页面
- [ ] 登出后跳转到登录页
- [ ] 未登录访问受限页面时重定向到登录

---

## 模块 3：配置管理

### 功能 3.1：LLM 配置
- [ ] 可查看当前 LLM 提供商与模型列表
- [ ] 可修改主力模型并保存
- [ ] 修改后新任务使用新配置
- [ ] 配置错误时给出验证提示

### 功能 3.2：数据源配置
- [ ] 可查看与修改数据源优先级
- [ ] 可配置 API Key 与参数
- [ ] 配置保存后生效

### 功能 3.3：系统设置
- [ ] 可修改系统参数（缓存策略、日志级别等）
- [ ] 设置修改后立即生效或需重启的提示清晰

---

## 模块 4：数据同步

### 功能 4.1：A 股数据同步
**数据源：Tushare**
- [ ] 初始同步完成，股票数据入库
- [ ] 增量同步可正常执行
- [ ] 同步完成后前端可查询到股票
- [ ] 日线数据完整（开高低收、成交量、成交额）
- [ ] 基本面数据完整（市值、PE、PB、ROE 等）

**数据源：AkShare**
- [ ] 初始同步完成
- [ ] 增量同步可正常执行
- [ ] 数据与 Tushare 对比无明显差异

**数据源：BaoStock**
- [ ] 初始同步完成
- [ ] 增量同步可正常执行
- [ ] 数据与其他源对比无明显差异

**数据源优先级切换**
- [ ] 修改数据源优先级后，新同步使用新配置
- [ ] 主数据源不可用时，自动切换到备用源

### 功能 4.2：港股数据同步
**数据源：Tushare**
- [ ] 初始同步完成
- [ ] 增量同步可正常执行
- [ ] 前端可按代码/名称查询港股
- [ ] 港股代码格式正确（如 00700.HK）

**数据源：AkShare**
- [ ] 初始同步完成
- [ ] 增量同步可正常执行
- [ ] 数据与 Tushare 对比无明显差异

### 功能 4.3：美股数据同步
**数据源：yfinance**
- [ ] 初始同步完成
- [ ] 增量同步可正常执行
- [ ] 前端可按代码/名称查询美股
- [ ] 美股代码格式正确（如 AAPL）

**数据源：Polygon**
- [ ] 初始同步完成
- [ ] 增量同步可正常执行
- [ ] 数据与 yfinance 对比无明显差异

**数据源：Alpha Vantage**
- [ ] 初始同步完成
- [ ] 增量同步可正常执行
- [ ] 数据与其他源对比无明显差异

### 功能 4.4：同步异常处理
- [ ] 数据源不可用时，同步失败并有日志提示
- [ ] API Key 错误时，同步失败并给出明确错误信息
- [ ] 网络异常时，同步失败但不导致系统崩溃
- [ ] 数据源限流时，有重试机制或友好提示
- [ ] 部分股票同步失败时，其他股票继续同步

---

## 模块 5：股票查询与详情

### 功能 5.1：股票搜索
- [ ] 按代码模糊查询可找到股票
- [ ] 按名称模糊查询可找到股票
- [ ] 多市场标识清晰（A 股/港股/美股）
- [ ] 搜索结果数量合理

### 功能 5.2：股票详情页
- [ ] 基本信息展示完整（名称、代码、行业、市值等）
- [ ] 技术指标正常显示（MA、RSI、MACD 等）
- [ ] 历史走势图表可正常渲染
- [ ] 历史分析记录可查看

### 功能 5.3：自选股管理
- [ ] 可在详情页添加到自选股
- [ ] 可在详情页从自选股移除
- [ ] 自选股列表展示正确
- [ ] 自选股列表中可快速跳转到详情页

---

## 模块 6：单只股票分析

### 功能 6.1：A 股分析 - 不同深度
**研究深度：1 级（快速分析）**
- [ ] 使用阿里百炼 qwen-max 完成分析
- [ ] 报告包含技术分析、基本面概览
- [ ] 分析时间 < 2 分钟
- [ ] 报告长度适中（约 2000-3000 字）

**研究深度：3 级（标准分析）**
- [ ] 使用阿里百炼 qwen-max 完成分析
- [ ] 报告包含技术、基本面、新闻、风险、结论
- [ ] 分析时间 < 5 分钟
- [ ] 报告长度较长（约 5000-8000 字）

**研究深度：5 级（深度分析）**
- [ ] 使用阿里百炼 qwen-max 完成分析
- [ ] 报告包含完整的技术、基本面、新闻、社交、风险、多轮辩论、综合结论
- [ ] 分析时间 < 10 分钟
- [ ] 报告长度很长（约 10000+ 字）
- [ ] 包含多轮智能体辩论内容

### 功能 6.2：A 股分析 - 不同 LLM 提供商
**阿里百炼 - qwen-max**
- [ ] 分析任务正常完成
- [ ] 报告质量符合预期
- [ ] 工具调用（Tool Call）正常

**阿里百炼 - qwen-plus**
- [ ] 分析任务正常完成
- [ ] 报告质量与 qwen-max 对比有差异但可接受

**Google Gemini - gemini-2.0-flash-exp**
- [ ] 分析任务正常完成
- [ ] 报告质量符合预期
- [ ] 工具调用正常

**Google Gemini - gemini-1.5-pro**
- [ ] 分析任务正常完成
- [ ] 报告质量与 flash 版本对比有差异

**DeepSeek - deepseek-chat**
- [ ] 分析任务正常完成
- [ ] 报告质量符合预期
- [ ] 工具调用正常

**302.AI - 各模型**
- [ ] 通过 302.AI 代理的模型可正常分析
- [ ] 报告质量与直连模型对比无明显差异

### 功能 6.3：港股分析 - 不同深度
**研究深度：1 级**
- [ ] 使用阿里百炼 qwen-max 完成港股分析
- [ ] 报告包含技术分析、基本面概览
- [ ] 港股特有指标（如恒生指数相关性）正常显示

**研究深度：3 级**
- [ ] 使用阿里百炼 qwen-max 完成港股分析
- [ ] 报告包含技术、基本面、新闻、风险、结论
- [ ] 港股新闻数据正常获取

**研究深度：5 级**
- [ ] 使用阿里百炼 qwen-max 完成港股分析
- [ ] 报告包含完整分析与多轮辩论
- [ ] 港股特有风险（如汇率、政策）有提及

### 功能 6.4：美股分析 - 不同深度
**研究深度：1 级**
- [ ] 使用 Google Gemini 完成美股分析
- [ ] 报告包含技术分析、基本面概览
- [ ] 美股特有指标（如标普 500 相关性）正常显示

**研究深度：3 级**
- [ ] 使用 Google Gemini 完成美股分析
- [ ] 报告包含技术、基本面、新闻、风险、结论
- [ ] 美股新闻数据正常获取（如 Finnhub）

**研究深度：5 级**
- [ ] 使用 Google Gemini 完成美股分析
- [ ] 报告包含完整分析与多轮辩论
- [ ] 美股特有风险（如美联储政策、财报季）有提及

### 功能 6.5：分析师组合测试
**仅技术分析师**
- [ ] 报告仅包含技术分析模块
- [ ] 无基本面、新闻等其他模块

**仅基本面分析师**
- [ ] 报告仅包含基本面分析模块
- [ ] 无技术分析、新闻等其他模块

**技术 + 基本面分析师**
- [ ] 报告包含技术与基本面两个模块
- [ ] 无新闻、社交等其他模块

**全分析师组合（技术 + 基本面 + 新闻 + 风险）**
- [ ] 报告包含所有分析模块
- [ ] 各模块内容完整且相互关联

### 功能 6.6：分析进度跟踪
- [ ] 任务状态从"排队"变为"运行中"
- [ ] 进度指示（SSE/WebSocket）实时更新
- [ ] 显示当前执行的分析师与步骤
- [ ] 任务完成后状态变为"成功"或"失败"
- [ ] 进度百分比准确

### 功能 6.7：分析报告查看
- [ ] 报告各模块（技术、基本面、新闻、风险、结论）有内容
- [ ] Markdown 渲染正常（标题、列表、表格、代码块）
- [ ] 模型信息显示正确（提供商、模型名称、版本）
- [ ] 分析参数显示正确（日期、深度、分析师组合）


### 功能 6.8：分析异常处理
- [ ] 错误股票代码时，任务失败并给出清晰错误提示
- [ ] LLM 超时时，任务失败并有重试机制
- [ ] 数据不足时，报告中有友好说明
- [ ] LLM API Key 错误时，任务失败并给出明确提示
- [ ] 网络异常时，任务失败但不导致系统崩溃
- [ ] 工具调用失败时，报告中有降级处理

---

## 模块 7：批量分析与任务中心

### 功能 7.1：批量分析 - 同市场多股票
**A 股批量分析（5 只股票）**
- [ ] 提交 5 只 A 股的批量分析任务
- [ ] 所有任务进入队列
- [ ] 任务按顺序或并发执行
- [ ] 所有任务完成后状态正确

**A 股批量分析（20 只股票）**
- [ ] 提交 20 只 A 股的批量分析任务
- [ ] 任务队列管理正常
- [ ] 并发控制正常（不超过系统限制）
- [ ] 所有任务完成后状态正确

**港股批量分析（10 只股票）**
- [ ] 提交 10 只港股的批量分析任务
- [ ] 所有任务正常完成
- [ ] 报告质量符合预期

**美股批量分析（10 只股票）**
- [ ] 提交 10 只美股的批量分析任务
- [ ] 所有任务正常完成
- [ ] 报告质量符合预期

### 功能 7.2：批量分析 - 跨市场混合
**A 股 + 港股 + 美股混合（各 5 只）**
- [ ] 提交包含 A 股、港股、美股的批量任务
- [ ] 不同市场股票分析正常
- [ ] 数据源切换正常
- [ ] 所有任务完成后状态正确

### 功能 7.3：批量分析 - 不同深度组合
**批量任务 - 深度 1 级**
- [ ] 提交 10 只股票的 1 级深度批量分析
- [ ] 所有任务快速完成（< 20 分钟）
- [ ] 报告长度适中

**批量任务 - 深度 3 级**
- [ ] 提交 10 只股票的 3 级深度批量分析
- [ ] 所有任务在合理时间内完成（< 50 分钟）
- [ ] 报告长度较长

**批量任务 - 深度 5 级**
- [ ] 提交 5 只股票的 5 级深度批量分析
- [ ] 所有任务在合理时间内完成（< 50 分钟）
- [ ] 报告长度很长，包含多轮辩论

### 功能 7.4：任务中心列表
- [ ] 任务列表展示状态、时间、发起人、股票代码、市场等信息
- [ ] 可按状态筛选任务（排队/运行中/成功/失败/已取消）
- [ ] 可按市场筛选任务（A 股/港股/美股）
- [ ] 可按时间排序（升序/降序）
- [ ] 可按股票代码搜索
- [ ] 分页正常工作（每页 10/20/50 条）

### 功能 7.5：任务详情与操作
- [ ] 可查看任务详情（参数、状态、日志）
- [ ] 可从任务详情跳转到对应报告
- [ ] 可取消排队中的任务
- [ ] 可取消运行中的任务
- [ ] 取消后任务状态变为"已取消"，worker 停止处理
- [ ] 可删除已完成的任务
- [ ] 可批量删除多个任务

### 功能 7.6：任务异常处理
- [ ] 批量任务中部分失败时，其他任务继续执行
- [ ] 失败任务有清晰的错误提示（股票代码、失败原因）
- [ ] LLM 限流时，任务自动重试或进入等待
- [ ] 系统重启后，未完成任务可恢复或标记为失败

---

## 模块 8：股票筛选

### 功能 8.1：A 股筛选 - 单条件
- [ ] 按市值范围筛选（如 100-500 亿）
- [ ] 按 PE 范围筛选（如 10-30）
- [ ] 按 PB 范围筛选（如 1-5）
- [ ] 按 ROE 范围筛选（如 > 15%）
- [ ] 按行业筛选（如电子、医药、金融）
- [ ] 按涨跌幅范围筛选（如 -5% ~ +5%）
- [ ] 按成交量范围筛选
- [ ] 按换手率范围筛选

### 功能 8.2：A 股筛选 - 组合条件
- [ ] 市值 + PE + PB 组合筛选
- [ ] 行业 + ROE + 涨跌幅组合筛选
- [ ] 市值 + 行业 + 成交量组合筛选
- [ ] 多条件组合（5 个以上条件）筛选


### 功能 8.3：筛选结果展示与操作
- [ ] 筛选结果数量合理（与条件匹配）
- [ ] 结果列表展示股票代码、名称、市场、市值、PE、PB 等关键信息
- [ ] 可按不同字段排序（市值、PE、PB、涨跌幅等）
- [ ] 可从结果列表跳转到股票详情页
- [ ] 可从结果列表直接发起分析
- [ ] 可将筛选结果添加到自选股
- [ ] 可导出筛选结果（CSV/Excel）
- [ ] 可保存筛选条件为预设

---

## 模块 9：报告导出

### 功能 9.1：Markdown 导出 - 不同市场
**A 股报告导出**
- [ ] 可导出为 Markdown 格式
- [ ] 导出文件内容完整，无缺失
- [ ] 文件可在本地编辑器打开
- [ ] 中文内容无乱码

**港股报告导出**
- [ ] 可导出为 Markdown 格式
- [ ] 繁体中文内容无乱码
- [ ] 港股特有指标正常显示

**美股报告导出**
- [ ] 可导出为 Markdown 格式
- [ ] 英文内容正常显示
- [ ] 美股特有指标正常显示

### 功能 9.2：PDF 导出 - 不同市场与深度
**A 股报告 - 深度 1 级**
- [ ] 可导出为 PDF 格式
- [ ] PDF 排版正常，无乱码
- [ ] 图表在 PDF 中正常显示
- [ ] 文件大小合理（< 5MB）

**A 股报告 - 深度 3 级**
- [ ] 可导出为 PDF 格式
- [ ] PDF 排版正常
- [ ] 图表与表格在 PDF 中正常显示
- [ ] 文件大小合理（< 10MB）

**A 股报告 - 深度 5 级**
- [ ] 可导出为 PDF 格式
- [ ] PDF 排版正常，长报告分页正确
- [ ] 图表、表格、代码块在 PDF 中正常显示
- [ ] 文件大小合理（< 20MB）

**港股报告 - PDF 导出**
- [ ] 可导出为 PDF 格式
- [ ] 繁体中文在 PDF 中正常显示
- [ ] 图表正常显示

**美股报告 - PDF 导出**
- [ ] 可导出为 PDF 格式
- [ ] 英文在 PDF 中正常显示
- [ ] 图表正常显示

### 功能 9.3：Word 导出 - 不同市场与深度
**A 股报告 - 深度 1 级**
- [ ] 可导出为 Word 格式
- [ ] Word 文档排版正常
- [ ] 表格与图表在 Word 中正常显示
- [ ] 文件可在 Microsoft Word 中打开

**A 股报告 - 深度 3 级**
- [ ] 可导出为 Word 格式
- [ ] Word 文档排版正常
- [ ] 表格与图表在 Word 中正常显示

**A 股报告 - 深度 5 级**
- [ ] 可导出为 Word 格式
- [ ] Word 文档排版正常，长报告分页正确
- [ ] 表格、图表、代码块在 Word 中正常显示

**港股报告 - Word 导出**
- [ ] 可导出为 Word 格式
- [ ] 繁体中文在 Word 中正常显示

**美股报告 - Word 导出**
- [ ] 可导出为 Word 格式
- [ ] 英文在 Word 中正常显示

### 功能 9.4：批量导出
- [ ] 可批量导出多份报告（Markdown）
- [ ] 可批量导出多份报告（PDF）
- [ ] 可批量导出多份报告（Word）
- [ ] 批量导出时进度指示正常
- [ ] 批量导出完成后可下载压缩包

### 功能 9.5：导出异常处理
- [ ] 导出失败时给出清晰错误提示
- [ ] 连续导出同一报告不产生异常
- [ ] 导出超时时有友好提示
- [ ] 导出文件过大时有提示或压缩处理

---

## 模块 10：新闻与社交分析

### 功能 10.1：A 股新闻分析
**新闻源：Tushare**
- [ ] 分析报告中包含 A 股新闻摘要
- [ ] 新闻情绪评估正常显示（正面/中性/负面）
- [ ] 重要事件与风险提示清晰
- [ ] 新闻时间范围合理（近 7 天或 30 天）

**新闻源：AkShare**
- [ ] 分析报告中包含 A 股新闻摘要
- [ ] 新闻与 Tushare 对比有差异但质量可接受
- [ ] 新闻情绪分析正常

**新闻源：东方财富**
- [ ] 分析报告中包含 A 股新闻摘要
- [ ] 新闻质量符合预期
- [ ] 新闻来源标注清晰

### 功能 10.2：港股新闻分析
**新闻源：Tushare**
- [ ] 分析报告中包含港股新闻摘要
- [ ] 新闻情绪评估正常显示
- [ ] 繁体中文新闻正常显示

**新闻源：Finnhub**
- [ ] 分析报告中包含港股新闻摘要
- [ ] 英文新闻正常显示
- [ ] 新闻质量符合预期

**新闻源：AkShare（东方财富港股）**
- [ ] 分析报告中包含港股新闻摘要
- [ ] 新闻质量符合预期

### 功能 10.3：美股新闻分析
**新闻源：Finnhub**
- [ ] 分析报告中包含美股新闻摘要
- [ ] 新闻情绪评估正常显示
- [ ] 英文新闻正常显示
- [ ] 新闻时间范围合理

**新闻源：Alpha Vantage**
- [ ] 分析报告中包含美股新闻摘要
- [ ] 新闻质量符合预期
- [ ] 新闻来源标注清晰

**新闻源：Yahoo Finance**
- [ ] 分析报告中包含美股新闻摘要
- [ ] 新闻质量符合预期

### 功能 10.4：美股社交媒体分析（Reddit）

**⚠️ 重要说明：Reddit 功能依赖离线数据**
- Reddit 功能需要预先准备的离线数据文件（.jsonl 格式）
- 数据目录：`data/reddit_data/` 或 `tradingagents/dataflows/data_cache/reddit_data/`
- **项目未提供 Reddit 数据下载脚本或数据源**
- 源项目（TauricResearch/TradingAgents）使用私有数据集 "Tauric TradingDB"（尚未公开发布）
- **默认安装下此功能无法使用**，系统会自动回退到其他新闻源

**前置条件检查**
- [ ] 确认是否存在 reddit_data 目录
- [ ] 如果目录存在，检查是否包含 .jsonl 文件
- [ ] 如果目录不存在，确认系统能正常回退到其他数据源

**基础功能测试（仅当数据存在时）**
- [ ] 分析报告中包含 Reddit 讨论内容
- [ ] Reddit 帖子标题和内容正常显示
- [ ] 帖子按 upvotes 排序（高赞在前）
- [ ] 只显示与目标股票相关的帖子（公司名或 ticker 匹配）

**数据范围测试（仅当数据存在时）**
- [ ] Reddit 数据时间范围与分析日期匹配
- [ ] 数据来源于本地 reddit_data 目录
- [ ] 数据为空时有友好提示

**异常处理与回退机制（默认情况）**
- [ ] reddit_data 目录不存在时，报告中有说明
- [ ] 目标日期无数据时，报告中有说明
- [ ] Reddit 数据缺失不影响其他分析模块
- [ ] 系统自动回退到其他新闻源（Alpha Vantage、Google News 等）
- [ ] 回退后的分析报告仍然完整可用

**API 限流处理**
- [ ] 新闻 API 限流时，有降级处理或友好提示
- [ ] 限流不导致整个分析任务失败

---

## 模块 11：通知与消息

### 功能 11.1：任务完成通知
- [ ] 任务完成后收到通知
- [ ] 通知中心可查看历史通知
- [ ] 可标记通知为已读

### 功能 11.2：系统公告
- [ ] 可查看系统公告
- [ ] 新公告有提示

---

## 模块 12：学习中心

### 功能 12.1：学习中心首页
- [ ] 分类卡片正常显示
- [ ] 推荐文章列表可点击

### 功能 12.2：分类页
- [ ] 文章列表展示标题、简介、阅读时长、标签
- [ ] 可按分类浏览文章

### 功能 12.3：文章详情页
- [ ] Markdown 渲染正常（标题、代码块、图片、表格）
- [ ] 目录（TOC）可点击并滚动到对应标题
- [ ] 文内指向其他 Markdown 文章的链接可跳转
- [ ] 指向外部链接的链接在新标签打开

---

## 模块 13：日志与运维

### 功能 13.1：操作日志
- [ ] 登录、分析、同步、配置修改等操作有日志记录
- [ ] 日志中包含操作人、操作时间、操作内容
- [ ] 可按操作类型/时间筛选日志

### 功能 13.2：系统日志
- [ ] 后端日志记录关键操作与错误
- [ ] 日志级别可配置
- [ ] 日志文件可正常轮转

### 功能 13.3：故障排查
- [ ] 失败任务的错误信息清晰
- [ ] 后端日志中有足够上下文便于排查

---

## 模块 14：综合场景测试

### 功能 14.1：高并发场景
- [ ] 同时提交 10 个单股分析任务（不同市场）
- [ ] 同时提交 5 个批量分析任务（每个 10 只股票）
- [ ] 系统负载正常，无崩溃或严重性能下降
- [ ] 所有任务最终完成，状态正确

### 功能 14.2：长时间运行稳定性
- [ ] 系统连续运行 24 小时无崩溃
- [ ] 内存占用稳定，无明显泄漏
- [ ] Redis 连接池正常，无连接泄漏
- [ ] MongoDB 连接正常，无连接泄漏

### 功能 14.3：数据源切换场景
- [ ] 主数据源（Tushare）不可用时，自动切换到 AkShare
- [ ] 切换后分析任务正常完成
- [ ] 主数据源恢复后，自动切回主源
- [ ] 切换过程中无数据丢失

### 功能 14.4：LLM 提供商切换场景
- [ ] 从阿里百炼切换到 Google Gemini
- [ ] 切换后新任务使用新提供商
- [ ] 旧任务（如已排队）继续使用旧提供商或自动切换
- [ ] 切换过程中无任务丢失

### 功能 14.5：跨市场混合分析场景
- [ ] 同时分析 A 股、港股、美股各 5 只
- [ ] 使用不同 LLM 提供商（A 股用阿里百炼，美股用 Google Gemini）
- [ ] 使用不同研究深度（A 股深度 3，港股深度 1，美股深度 5）
- [ ] 所有任务正常完成，报告质量符合预期

### 功能 14.6：极端数据场景
- [ ] 分析停牌股票，报告中有友好说明
- [ ] 分析退市股票，报告中有风险提示
- [ ] 分析新上市股票（历史数据不足），报告中有说明
- [ ] 分析数据异常股票（如价格异常波动），报告中有风险提示

### 功能 14.7：网络异常恢复场景
- [ ] 分析过程中断网，任务失败并有提示
- [ ] 网络恢复后，可重新提交任务
- [ ] 数据同步过程中断网，同步失败并有提示
- [ ] 网络恢复后，可继续同步

### 功能 14.8：配置热更新场景
- [ ] 修改 LLM 配置后，无需重启系统
- [ ] 修改数据源配置后，无需重启系统
- [ ] 修改系统参数后，立即生效或提示需重启
- [ ] 配置修改过程中，运行中的任务不受影响

---

