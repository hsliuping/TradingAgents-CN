# TradingAgents-CN Docker环境配置
# 🐳 此文件专门用于Docker容器内的环境变量配置
# 🔐 重要：请修改 API 密钥为您的真实密钥

# ===== Docker环境标识 =====
DOCKER_CONTAINER=true

# ===== 必需的API密钥 =====

# 🇨🇳 阿里百炼 API 密钥 (推荐，国产大模型，中文优化)
# 获取地址: https://dashscope.aliyun.com/
DASHSCOPE_API_KEY=your_dashscope_api_key_here
DASHSCOPE_ENABLED=false

# 🤖 DeepSeek API 密钥 (推荐，性价比高)
# 获取地址: https://platform.deepseek.com/
DEEPSEEK_API_KEY=your_deepseek_api_key_here
DEEPSEEK_ENABLED=false

# 🌐 OpenAI API 密钥 (可选，需要国外网络)
# 获取地址: https://platform.openai.com/
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_ENABLED=false

# 🧠 文心一言（百度千帆）API 密钥
# 获取地址: https://cloud.baidu.com/product/wenxinworkshop
QIANFAN_API_KEY=your_qianfan_api_key_here
QIANFAN_ENABLED=false

# 🔍 Google AI API 密钥 (可选，用于Gemini模型)
# 获取地址: https://ai.google.dev/
# 注意：如果不使用 Google Gemini，请保持 GOOGLE_ENABLED=false
# 如果 API Key 无效，系统会自动降级到其他模型
GOOGLE_API_KEY=your_google_api_key_here
GOOGLE_ENABLED=false

# 🤖 Anthropic API 密钥 (可选，用于Claude模型)
# 获取地址: https://console.anthropic.com/
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_ENABLED=false

# 🌐 OpenRouter API 密钥 (可选，聚合多个AI模型)
# 获取地址: https://openrouter.ai/
OPENROUTER_API_KEY=your_openrouter_api_key_here
OPENROUTER_ENABLED=false

# 🤖 AI302 API 密钥 (可选)
AI302_API_KEY=your_ai302_api_key_here
AI302_ENABLED=false

# 📈 Tushare API Token（推荐，专业A股数据）
# 获取地址: https://tushare.pro/register?reg=tacn
# 获取步骤：注册账号 -> 邮箱验证 -> 获取Token
# 注意：免费用户有调用频率限制，建议升级积分到2000积分以上，实时行情需要另外交费
TUSHARE_TOKEN=your_tushare_token_here
TUSHARE_ENABLED=false

# 📊 FinnHub API 密钥 (可选，用于获取金融数据)
# 获取地址: https://finnhub.io/
FINNHUB_API_KEY=your_finnhub_api_key_here

# ===== 代理配置 =====
# 配置需要绕过代理的域名（国内数据源）
NO_PROXY=localhost,127.0.0.1,eastmoney.com,push2.eastmoney.com,82.push2.eastmoney.com,82.push2delay.eastmoney.com,gtimg.cn,sinaimg.cn,api.tushare.pro,baostock.com

# ===== 数据源配置 =====

# 🎯 默认中国股票数据源
# 可选值: tushare, akshare, baostock
DEFAULT_CHINA_DATA_SOURCE=akshare

# Tushare权限等级配置（用于速率限制）
# 可选值: free(120次/分), basic(300次/分), standard(800次/分), premium(2000次/分), vip(5000次/分)
TUSHARE_TIER=standard
TUSHARE_RATE_LIMIT_SAFETY_MARGIN=0.8

# ===== 在线工具配置 =====
ONLINE_TOOLS_ENABLED=false
ONLINE_NEWS_ENABLED=true
REALTIME_DATA_ENABLED=true

# ===== Reddit API 配置 (可选) =====
REDDIT_CLIENT_ID=your_reddit_client_id_here
REDDIT_CLIENT_SECRET=your_reddit_client_secret_here
REDDIT_USER_AGENT=TradingAgents-CN/1.0

# ===== 数据库配置 =====

# 🔧 数据库启用开关
MONGODB_ENABLED=true
REDIS_ENABLED=true

# MongoDB配置（Docker环境使用服务名，带认证）
MONGODB_HOST=mongodb
MONGODB_PORT=27017
MONGODB_USERNAME=admin
MONGODB_PASSWORD=tradingagents123
MONGODB_DATABASE=tradingagents
MONGODB_AUTH_SOURCE=admin
MONGODB_URL=mongodb://admin:tradingagents123@mongodb:27017/tradingagents?authSource=admin
MONGO_URI=mongodb://admin:tradingagents123@mongodb:27017/tradingagents?authSource=admin
MONGO_DB=tradingagents
MONGODB_CONNECTION_STRING=mongodb://admin:tradingagents123@mongodb:27017/tradingagents?authSource=admin
MONGODB_DATABASE_NAME=tradingagents
USE_MONGODB_STORAGE=true

# Redis配置（Docker环境使用服务名，带密码）
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=tradingagents123
REDIS_DB=0
REDIS_URL=redis://:tradingagents123@redis:6379/0
REDIS_MAX_CONNECTIONS=50
REDIS_RETRY_ON_TIMEOUT=true

# ===== 安全配置 =====

# 🔐 JWT配置 (用于用户认证)
JWT_SECRET=docker-jwt-secret-key-change-in-production-2024
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=480
REFRESH_TOKEN_EXPIRE_DAYS=30

# CSRF保护
CSRF_SECRET=docker-csrf-secret-key-change-in-production-2024
BCRYPT_ROUNDS=12

# ===== API服务配置 =====

# 🚀 API服务基础配置
HOST=0.0.0.0
PORT=8000
DEBUG=false

# 🔗 CORS配置
ALLOWED_ORIGINS=["http://localhost:3000", "http://localhost:80", "http://localhost:8000"]
ALLOWED_HOSTS=["*"]
CORS_ORIGINS=*

# 📊 队列和并发配置
QUEUE_MAX_SIZE=10000
QUEUE_VISIBILITY_TIMEOUT=300
QUEUE_MAX_RETRIES=3

# 并发控制
DEFAULT_USER_CONCURRENT_LIMIT=3
GLOBAL_CONCURRENT_LIMIT=50
DEFAULT_DAILY_QUOTA=1000

# Worker配置
WORKER_HEARTBEAT_INTERVAL=30

# 速率限制
RATE_LIMIT_ENABLED=true
DEFAULT_RATE_LIMIT=100

# 📁 文件上传配置
MAX_UPLOAD_SIZE=10485760
UPLOAD_DIR=uploads

# 📊 监控配置
METRICS_ENABLED=true
HEALTH_CHECK_INTERVAL=60

# ===== 日志配置 =====
TRADINGAGENTS_LOG_LEVEL=INFO
TRADINGAGENTS_LOG_DIR=/app/logs
TRADINGAGENTS_LOG_FILE=/app/logs/tradingagents.log

# ===== 数据目录配置 =====
TRADINGAGENTS_DATA_DIR=/app/data
TRADINGAGENTS_CACHE_DIR=/app/data/cache
TRADINGAGENTS_SESSIONS_DIR=/app/data/sessions
TRADINGAGENTS_LOGS_DIR=/app/data/logs
TRADINGAGENTS_CONFIG_DIR=/app/data/config
TRADINGAGENTS_TEMP_DIR=/app/data/temp
TRADINGAGENTS_RESULTS_DIR=/app/data/analysis_results

# ===== 时区配置 =====
TZ=Asia/Shanghai
TIMEZONE=Asia/Shanghai

# ===== 缓存配置 =====
TA_USE_APP_CACHE=true

# ===== 股票基础信息同步调度配置 =====
SYNC_STOCK_BASICS_ENABLED=true
SYNC_STOCK_BASICS_TIME=06:30

# ===== 实时行情入库任务配置 =====
QUOTES_INGEST_ENABLED=true
QUOTES_INGEST_INTERVAL_SECONDS=30

# ===== Tushare数据同步服务配置 =====
# Tushare统一数据同步总开关
TUSHARE_UNIFIED_ENABLED=false
# 基础信息同步
TUSHARE_BASIC_INFO_SYNC_ENABLED=false
TUSHARE_BASIC_INFO_SYNC_CRON=0 2 * * *
# 行情同步（交易时间每1分钟）
TUSHARE_QUOTES_SYNC_ENABLED=false
TUSHARE_QUOTES_SYNC_CRON=*/1 9-15 * * 1-5
# 历史数据同步（工作日16点）
TUSHARE_HISTORICAL_SYNC_ENABLED=false
TUSHARE_HISTORICAL_SYNC_CRON=0 16 * * 1-5
# 财务数据同步（周日凌晨3点）
TUSHARE_FINANCIAL_SYNC_ENABLED=false
TUSHARE_FINANCIAL_SYNC_CRON=0 3 * * 0
# 状态检查（每小时）
TUSHARE_STATUS_CHECK_ENABLED=false
TUSHARE_STATUS_CHECK_CRON=0 * * * *

# ===== AKShare数据同步服务配置 =====
# AKShare统一数据同步总开关
AKSHARE_UNIFIED_ENABLED=false
# 基础信息同步
AKSHARE_BASIC_INFO_SYNC_ENABLED=false
AKSHARE_BASIC_INFO_SYNC_CRON=0 3 * * *
# 行情同步（交易时间每30分钟，避免频率限制）
AKSHARE_QUOTES_SYNC_ENABLED=false
AKSHARE_QUOTES_SYNC_CRON=*/30 9-15 * * 1-5
# 历史数据同步（工作日17点）
AKSHARE_HISTORICAL_SYNC_ENABLED=false
AKSHARE_HISTORICAL_SYNC_CRON=0 17 * * 1-5
# 财务数据同步（周日凌晨4点）
AKSHARE_FINANCIAL_SYNC_ENABLED=false
AKSHARE_FINANCIAL_SYNC_CRON=0 4 * * 0
# 状态检查（每小时30分）
AKSHARE_STATUS_CHECK_ENABLED=false
AKSHARE_STATUS_CHECK_CRON=30 * * * *

# ===== 分析师数据获取配置 =====
# 市场分析回溯天数（用于技术分析）
MARKET_ANALYST_LOOKBACK_DAYS=30
# 基本面分析：固定获取10天数据，分析最近2天（无需配置）

# ===== BaoStock数据同步服务配置 =====
# BaoStock统一数据同步总开关
BAOSTOCK_UNIFIED_ENABLED=false
# 基础信息同步
BAOSTOCK_BASIC_INFO_SYNC_ENABLED=false
BAOSTOCK_BASIC_INFO_SYNC_CRON=0 4 * * *
# 行情同步（交易时间每15分钟）
BAOSTOCK_QUOTES_SYNC_ENABLED=false
BAOSTOCK_QUOTES_SYNC_CRON=*/15 9-15 * * 1-5
# 历史数据同步（工作日18点）
BAOSTOCK_HISTORICAL_SYNC_ENABLED=false
BAOSTOCK_HISTORICAL_SYNC_CRON=0 18 * * 1-5
# 状态检查（每小时45分）
BAOSTOCK_STATUS_CHECK_ENABLED=false
BAOSTOCK_STATUS_CHECK_CRON=45 * * * *

# ===== 新闻数据同步服务配置 =====
NEWS_SYNC_ENABLED=false
NEWS_SYNC_CRON=0 */2 * * *
NEWS_SYNC_HOURS_BACK=24
NEWS_SYNC_MAX_PER_SOURCE=50
