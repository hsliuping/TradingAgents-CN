# 阶段六实施细节 - 任务三：结果展示与组件开发

本任务关注分析结果的最终呈现，确保后端生成的丰富数据（包括结构化数据）能够被用户直观理解。

## 1. 报告映射配置 (Report Mapping)

### 目标
让前端“认识”新的报告字段，并将其渲染到界面上。

### 详细步骤
1.  **更新 `SingleAnalysis.vue` -> `reportMappings`**:
    - 添加以下映射对象：
      ```typescript
      { key: 'macro_report', title: '🌍 宏观经济分析', category: '指数分析团队' },
      { key: 'policy_report', title: '📜 政策解读分析', category: '指数分析团队' },
      { key: 'sector_report', title: '🏭 行业板块分析', category: '指数分析团队' },
      { key: 'intl_news_report', title: '🌐 国际新闻分析', category: '指数分析团队' },
      { key: 'bull_bear_report', title: '🐂🐻 多空博弈辩论', category: '指数分析团队' },
      { key: 'risk_report', title: '🛡️ 风险控制评估', category: '指数分析团队' }
      ```
2.  **更新 `ReportDetail.vue` -> `nameMap`**:
    - 添加对应的键值对映射，确保详情页标题显示正确中文。

## 2. 结果弹窗组件分流 (`TaskResultDialog.vue`)

### 目标
在任务完成后的第一时间，根据分析类型展示不同的摘要视图。

### 详细步骤
1.  **识别分析类型**:
    - 通过 `result.analysis_type` 判断。
2.  **条件渲染**:
    - **个股模式**：保持现有逻辑（建议 + 摘要）。
    - **指数模式**：
        - 顶部：展示 `risk_assessment` (风险等级 + 建议)。
        - 中部：展示 `debate_summary` (多空核心观点对比)。
        - 底部：展示 `macro_analysis` 摘要。

## 3. 新增专用展示组件 (Component Scaffolding)

### 目标
为结构化数据提供优于纯文本的展示形式。

### 详细步骤
1.  **`IntlNewsView.vue` (国际新闻)**:
    - **输入**: `news_list` (Array), `analysis` (String).
    - **UI**: 时间轴列表展示新闻标题与时间，下方展示总结分析。
2.  **`DebateView.vue` (多空辩论)**:
    - **输入**: `bull_point`, `bear_point`, `conclusion`.
    - **UI**: 左右两栏布局。左侧红色/绿色背景展示多头观点，右侧绿色/红色背景展示空头观点，底部展示裁判结论。
3.  **`RiskView.vue` (风险仪表盘)**:
    - **输入**: `level` (High/Medium/Low), `suggestion`.
    - **UI**: 使用 `el-tag` 或进度条展示风险等级，醒目展示操作建议。

## 4. 集成到报告页
1.  在 `SingleAnalysis.vue` 的报告渲染区域，使用 `<component :is="...">` 动态组件，或简单的 `v-if` 判断：
    - 如果字段是 `intl_news_report`，渲染 `<IntlNewsView>`。
    - 如果字段是 `bull_bear_report`，渲染 `<DebateView>`。
    - 其他字段默认使用 Markdown 渲染器。
