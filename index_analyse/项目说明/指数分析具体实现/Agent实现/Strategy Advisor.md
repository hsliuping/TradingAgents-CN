# Strategy Advisor (策略顾问)

**职责**: 作为整个指数分析工作流的最终决策者，策略顾问在充分理解并吸收多头和空头研究员的辩论结果后，结合宏观经济、政策、基本面、技术面、社交媒体等多维度分析，制定最终的指数交易策略和风险管理建议，并对辩论过程中产生的结论进行复盘。

**核心输出**:
- **最终交易策略**: 明确的买入/卖出/持有建议，包含具体的价格区间、止损位、止盈位等。
- **综合风险评估**: 汇总所有潜在风险，提出相应的风险管理措施。
- **市场观点**: 对未来市场走势的综合判断和预期。
- **辩论复盘**: 对多头、空头研究员辩论结果的总结和经验教训。
- **决策依据**: 具体说明为何采纳或拒绝特定研究员的观点。

**调用工具/接口**:
- 无直接外部工具调用，主要依赖接收并整合分析结果。

**数据获取与分析**:
策略顾问不直接调用数据接口，而是作为信息整合与决策中心，接收来自其他分析师和研究员的结构化报告。它将：
1.  **汇集所有信息**: 从 `Index Info Collector`、`Macro Analyst`、`Policy Analyst`、`Fundamentals Analyst`、`Technical Analyst`、`Social Media Analyst`、`International News Analyst`、`China Market Analyst` 的报告中提取关键结论。
2.  **评估多空辩论**: 审视 `Index Bull Researcher` 和 `Index Bear Researcher` 的辩论过程和结果，理解双方的论据强度、逻辑漏洞以及最终的共识或分歧点。
3.  **综合考量**: 结合所有信息，进行跨维度分析，例如：宏观政策对技术走势的影响、基本面变化如何被社交媒体解读等。注重信息之间的交叉验证和逻辑一致性。
4.  **风险平衡**: 在做出决策时，策略顾问会将收益潜力与风险暴露进行权衡，提供符合风险偏好的策略。
5.  **输出决策**: 将综合分析转化为清晰、可执行的交易策略和风险管理建议。

**策略顾问决策的深度 (`research_depth` 设定)**:
`Strategy Advisor` 的决策深度受整个系统的 `research_depth` 参数影响，具体体现在：
- **浅层决策 (depth 1-2)**: 主要基于分析师的直接报告和研究员辩论的简要结论进行快速判断。更侧重于识别明显的趋势信号和规避显性风险。
- **中层决策 (depth 3-4)**: 会对分析师和研究员报告中的细节进行更深入的审视，尝试发现报告中的潜在矛盾点，并权衡不同维度信息的重要性。在风险管理上，会考虑更多情景分析。
- **深层决策 (depth 5)**: 会对所有输入信息进行严谨的交叉验证，深入剖析多空辩论的每一个环节，识别出最细微的风险或机会。此时还会利用检索增强生成（RAG）机制，从外部知识库中提取历史策略案例以便提供更周全的决策支持。

**知识检索策略**:
- 策略顾问在需要时会主动调用 `code_rag_mcp_service` 提供的 `arch_knowledge`、`data_model_knowledge` 和 `business_process_knowledge` 工具，以获取关于系统架构、数据模型或业务流程的知识，帮助其更好地理解数据流、工具特性以及业务逻辑，从而在复杂信息中做出更有效的决策。

**降级方案**:
当接收到的分析报告不完整、研究员辩论异常中断、或无法形成一致性策略时，`Strategy Advisor` 将提供一个结构化的降级报告，明确指出决策受限的原因，并给出保持观望或减仓的保守建议，例如：“【策略决策降级】由于核心数据缺失或多空研究不完整，无法形成明确交易策略。建议保持观望，等待信号明朗。”