<!--
 * @Author: zhengweicheng 46236959+zwczwczwc@users.noreply.github.com
 * @Date: 2025-12-21 17:00:20
 * @LastEditors: zhengweicheng 46236959+zwczwczwc@users.noreply.github.com
 * @LastEditTime: 2025-12-21 17:09:21
 * @FilePath: /TradingAgents-CN-Test/文档/P0需求一：指数分析workflow/阶段四：多空博弈与决策深度优化/设计文档/指数分析多空博弈需求说明.md
 * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
-->
# 指数分析多空博弈需求说明书

## 1. 背景与痛点

当前的指数分析工作流（Workflow v2.2）采用线性流程：`数据采集 Agents -> Strategy Advisor -> 结果输出`。虽然引入了双模输出（Markdown分析+JSON数据），但在最终决策层面仍存在以下痛点：

1.  **缺乏深度思考过程**：系统直接输出“看多/看空”及仓位建议，用户无法感知系统是如何权衡利弊的。
2.  **决策依据单薄**：Strategy Advisor 仅根据上游的评分指标进行加权计算，缺乏对定性分析内容的深度理解和对抗性验证。
3.  **用户信任度不足**：对于“加仓20%”或“减仓40%”这样重大的投资建议，如果没有充分的论证过程（特别是对反面观点的驳斥），用户很难采纳。

## 2. 核心需求

### 2.1 引入多空博弈机制
参考个股分析（Stock Analysis）的成功经验，在指数分析中引入**多空辩论层**。
- **多头代表（Index Bull Researcher）**：挖掘目标指数（如沪深300、半导体指数等）的积极因素（政策底、技术底、资金流入等），主张增加仓位。
- **空头代表（Index Bear Researcher）**：挖掘目标指数的风险因素（估值过高、行业利空、技术破位等），主张降低仓位。

### 2.2 深度决策报告
最终的投资策略报告不能仅仅是数据的堆砌，必须包含：
- **辩论综述**：总结围绕目标指数的多空双方最激烈的交锋点。
- **决策逻辑**：说明为何采纳某一方的观点（例如：“虽然空方指出了外围风险，但多方强调的政策托底逻辑在当前权重更高”）。
- **具体的调仓建议**：基于深度分析给出的明确仓位调整幅度（如+20% / -40%）。

### 2.3 架构复用与差异化
- **复用**：复用个股分析中的 Agent State 管理、辩论循环控制（Conditional Logic）等设计模式。
- **差异化**：新建针对指数宏观分析的 Prompt 和 Agent 类，不直接使用个股的 Company/Valuation 相关逻辑。

## 3. 验收标准

1.  **工作流变更**：流程中必须包含 `Index Bull Researcher` 和 `Index Bear Researcher` 的交互环节。
2.  **输出内容**：最终 JSON 报告中必须包含 `debate_summary` 字段，且内容言之有物。
3.  **决策一致性**：最终的仓位建议（Final Position）应与辩论的胜负倾向保持逻辑一致。
