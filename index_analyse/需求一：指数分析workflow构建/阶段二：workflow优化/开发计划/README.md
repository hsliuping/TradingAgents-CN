# 指数分析Workflow优化 - 分阶段开发计划

## 📁 文件夹说明

本文件夹包含指数分析workflow优化的分阶段开发计划，基于职责分离原则，实现International News Analyst、Policy Analyst扩展和Strategy Advisor重构。

---

## 📚 文档结构

```
开发计划/
├── README.md                       # 本文件 - 文件夹说明
├── 00-总体规划.md                  # 项目总体规划和阶段划分
├── 阶段一-International_News_Analyst实现.md     # 新增国际新闻分析师
├── 阶段二-Policy_Analyst扩展.md                  # 扩展政策分析师
├── 阶段三-Strategy_Advisor重构.md                # 重构策略顾问
├── 阶段四-工作流集成与测试.md                    # 工作流集成和全面测试
└── 阶段五-文档完善与交付.md                      # 文档完善和项目交付
```

---

## 🎯 如何使用本开发计划

### 第一步：阅读总体规划
首先阅读 `00-总体规划.md`，了解：
- 优化目标和背景
- 职责分离原则
- 5个开发阶段的划分
- 预计时间和交付物
- 开发规范和风险控制

### 第二步：按顺序执行各阶段
按照阶段顺序依次执行：

1. **阶段一：International News Analyst实现** (3-4天)
   - 创建国际新闻分析师Agent
   - 实现新闻分类和影响评估
   - 实现去重机制
   - 编写单元测试

2. **阶段二：Policy Analyst扩展** (2-3天)
   - 扩展长期政策识别功能
   - 添加政策分层逻辑
   - 输出政策支持强度评估
   - 更新测试

3. **阶段三：Strategy Advisor重构** (3-4天)
   - 实现完整决策算法
   - 双层仓位决策逻辑
   - 分层持仓策略生成
   - 动态调整触发条件

4. **阶段四：工作流集成与测试** (2-3天)
   - 扩展工作流图
   - 节点顺序调整
   - 集成测试
   - 性能优化

5. **阶段五：文档完善与交付** (1-2天)
   - 完善API文档
   - 用户指南
   - 测试报告
   - 交付验收

### 第三步：验收和交付
每个阶段完成后：
- ✅ 检查验收标准
- ✅ 运行测试套件
- ✅ Code Review
- ✅ 更新进度跟踪

---

## 📋 快速导航

### 按角色查看

**项目经理**：
- [总体规划](./00-总体规划.md) - 了解项目整体安排
- 每个阶段的"进度跟踪"章节

**开发工程师**：
- 每个阶段的"详细开发任务"章节
- 每个阶段的"实现要点"和"代码示例"
- "注意事项"章节

**测试工程师**：
- 每个阶段的"编写测试"任务
- [阶段四-工作流集成与测试](./阶段四-工作流集成与测试.md) - 完整测试方案

**技术架构师**：
- [总体规划](./00-总体规划.md) - 职责分离架构
- [阶段三](./阶段三-Strategy_Advisor重构.md) - 决策算法设计
- [阶段四](./阶段四-工作流集成与测试.md) - 工作流设计

---

## 🎓 开发规范参考

### 代码规范
1. **职责分离原则**：分析Agent只输出信息,不输出仓位建议
2. **决策集中原则**：所有仓位决策逻辑集中在Strategy Advisor
3. **错误处理**：每个函数都必须有异常处理和降级方案
4. **日志记录**：使用统一的logger，记录关键步骤
5. **类型提示**：所有函数必须有完整的类型注解

### 测试规范
1. **单元测试覆盖率**：≥ 80%
2. **职责验证**：验证分析Agent不输出仓位建议
3. **决策验证**：验证Strategy Advisor决策算法正确性
4. **集成测试**：验证端到端工作流

### 文档规范
1. **代码注释**：关键逻辑必须有中文注释
2. **函数文档**：使用Google风格的docstring
3. **架构文档**：更新职责分离相关文档

---

## 📊 整体进度一览

| 阶段 | 预计天数 | 主要交付物 | 状态 |
|------|----------|-----------|------|
| 阶段一 | 3-4天 | International News Analyst | 📋 待开始 |
| 阶段二 | 2-3天 | Policy Analyst扩展 | 📋 待开始 |
| 阶段三 | 3-4天 | Strategy Advisor重构 | 📋 待开始 |
| 阶段四 | 2-3天 | 工作流集成、测试报告 | 📋 待开始 |
| 阶段五 | 1-2天 | 文档、交付验收 | 📋 待开始 |

**总计**：11-16天

---

## ⚠️ 重要提示

### 开发前准备
1. ✅ 确保已阅读职责分离优化说明文档
2. ✅ 确保已阅读概要设计文档
3. ✅ 确保阶段一已完成（Macro/Policy/Sector/Strategy Agent已实现）
4. ✅ 确保开发环境已就绪

### 开发中注意
1. ⚠️ **严格职责分离** - 分析Agent不输出仓位
2. ⚠️ **决策逻辑集中** - 只在Strategy Advisor实现决策算法
3. ⚠️ **向后兼容** - 保持现有字段名称
4. ⚠️ **充分测试** - 验证职责分离原则

### 质量保证
1. ✅ 每个阶段完成后进行Code Review
2. ✅ 验证职责分离：分析Agent输出不含仓位字段
3. ✅ 验证决策正确：Strategy Advisor决策算法正确
4. ✅ 定期同步进度，及时调整计划

---

## 📞 支持和帮助

### 遇到问题？
1. **职责分离问题**：参考职责分离优化说明文档
2. **技术问题**：查看各阶段的"注意事项"章节
3. **测试问题**：参考阶段四的测试方案

### 需要调整计划？
1. 评估影响范围
2. 更新进度跟踪表
3. 调整后续阶段的时间安排

---

## 📚 相关文档链接

### 设计文档
- [指数分析workflow优化需求说明](../设计文档/指数分析workflow优化需求说明.md)
- [指数分析workflow优化概要设计](../设计文档/指数分析workflow优化概要设计.md)
- [职责分离优化说明](../设计文档/职责分离优化说明.md)

### 阶段一文档（依赖）
- [阶段一开发计划](../../阶段一：构建新的指数分析workflow/开发计划/)
- [阶段一概要设计](../../阶段一：构建新的指数分析workflow/设计文档/指数分析功能设计方案.md)

### 技术文档
- [LangGraph官方文档](https://langchain-ai.github.io/langgraph/)
- [NewsAPI文档](https://newsapi.org/docs)
- [Pydantic文档](https://docs.pydantic.dev/)

---

## 📅 版本历史

| 版本 | 日期 | 修改内容 | 作者 |
|------|------|---------|------|
| v1.0 | 2024-12-14 | 初始版本，基于职责分离原则创建开发计划 | TradingAgents-CN团队 |

---

## 💡 建议和反馈

如果您在使用本开发计划时有任何建议或发现问题，请：
1. 记录在项目的Issue中
2. 或直接更新本文档并提交PR

---

**祝开发顺利！** 🚀
